!function(e){"function"==typeof define&&define.amd?define("appEvents",e):e()}(function(){"use strict";jQuery(e=>{var t=document.getElementById("vx-app-events");t&&(window.$=jQuery,(e=>{let t=JSON.parse(e.dataset.config);return Vue.createApp({el:e,data(){return{config:t,state:{loading:!1,activeEvent:null,activeCategory:Object.keys(t.categories)[0]}}},created(){Object.values(this.config.events).forEach(e=>{e.activeNotification=Object.values(e.notifications)[0]})},methods:{toggleEvent(e){this.state.activeEvent=this.state.activeEvent===e?null:e},saveChanges(){this.state.loading=!0;let i={};Object.values(this.config.events).forEach(a=>{i[a.key]={notifications:{}},Object.keys(a.notifications).forEach(e=>{var t=a.notifications[e];i[a.key].notifications[e]={inapp:t.inapp,email:t.email}})});var e=Voxel_Config.ajax_url+"&action=app_events.save_config";jQuery.post(e,{config:JSON.stringify(i)},e=>{this.state.loading=!1,e.success?Voxel_Backend.alert(e.message,"info",2e3):Voxel_Backend.alert(e.message||Voxel_Config.l10n.ajaxError,"error")})},editTags(e,t,a,i=null){var n=a.split(".");let o=n[0],s=n[1];if(void 0===t[o][s])console.log("Unknown target: "+a);else{let a={};e.dynamic_tags.forEach(e=>{var t=VX_APP_EVENT_TAG_GROUPS[e.id];t.title=e.label,a[t.key]=t}),DTags.edit(t[o][s]||i,e=>{t[o][s]=e===i?"":e},a)}},toggleCategory(e,t=null){t=t?t.children:this.config.categories;Object.values(t).forEach(e=>e.expanded=!1),e.children&&(e.expanded=!0),this.state.activeCategory=e.key}}})})(t).mount("#vx-app-events"))})});
