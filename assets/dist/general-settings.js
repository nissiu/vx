!function(e){"function"==typeof define&&define.amd?define("generalSettings",e):e()}(function(){"use strict";var s={template:"#product-type-rate-list-template",props:["modelValue","mode","source"],data(){return{loading:!1,open:!1,rates:null,first_item:null,is_last_page:!1}},methods:{show(){this.open=!0,this.loading=!0,null===this.rates&&jQuery.get(Voxel_Config.ajax_url,{action:this.source,mode:this.mode},e=>{this.loading=!1,this.is_last_page=!e.has_more,this.rates=e.rates,this.first_item=this.rates?.[0]?.id})},toggle(e){var t=this.modelValue.indexOf(e.id);-1<t?this.modelValue.splice(t,1):this.modelValue.push(e.id)},isSelected(e){return-1<this.modelValue.indexOf(e.id)},remove(e){e=this.modelValue.indexOf(e);-1<e&&this.modelValue.splice(e,1)},prev(){this.loading=!0;var e=this.rates[0].id;jQuery.get(Voxel_Config.ajax_url,{action:this.source,mode:this.mode,ending_before:e},e=>{this.loading=!1,this.has_more=e.has_more,e.rates.length&&(this.rates=e.rates,this.is_last_page=!1)})},next(){this.loading=!0;var e=this.rates[this.rates.length-1].id;jQuery.get(Voxel_Config.ajax_url,{action:this.source,mode:this.mode,starting_after:e},e=>{this.loading=!1,this.has_more=e.has_more,e.rates.length&&(this.rates=e.rates,this.is_last_page=!e.has_more)})}}};document.addEventListener("DOMContentLoaded",()=>{var e,t=document.getElementById("vx-general-settings");t&&((e=Vue.createApp({el:t,data(){return{config:null,state:{},tab:null,webhooks:{tab:"live",liveDetails:!1,testDetails:!1,editLiveDetails:!1,editTestDetails:!1}}},created(){this.config=jQuery.extend(!0,this.config,JSON.parse(this.$options.el.dataset.config)),this.tab=this.config.tab},methods:{editFooterText(e){let t=e.target.placeholder;DTags.edit(this.config.emails.footer_text||t,e=>{this.config.emails.footer_text=e===t?"":e},{site:Dynamic_Tag_Groups.site})},removeMenuLocation(e){confirm(Voxel_Config.l10n.confirmAction)&&this.config.nav_menus.custom_locations.splice(e,1)},checkEndpointStatus(t,s=!1){let i=this.$refs[t+"EndpointStatus"];i?.classList.add("vx-disabled"),jQuery.get(Voxel_Config.ajax_url,{action:s?"general.stripe.connect_endpoint_status":"general.stripe.endpoint_status",mode:t}).always(e=>{i?.classList.remove("vx-disabled"),e.success?(e.id&&(this.config.stripe.webhooks[t+(s?"_connect":"")].id=e.id),e.secret&&(this.config.stripe.webhooks[t+(s?"_connect":"")].secret=e.secret),Voxel_Backend.alert(e.message)):Voxel_Backend.alert(e.message||Voxel_Config.l10n.ajaxError,"error")})}},watch:{tab(){this.config.tab=this.tab;var e=new URL(window.location);e.searchParams.set("tab",this.tab),window.history.replaceState(null,null,e)}}})).component("rate-list",s),e.mount(t))})});
